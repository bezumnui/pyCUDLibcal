<!DOCTYPE html>
<html lang="en">
<head>
    <!-- iid: 4851 -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
            <link href="https://static-assets-us.libcal.com/bootstrap_13/bootstrap3.min.css" rel="stylesheet">
    

    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://static-assets-us.libcal.com/css_681/LibCal_public.min.css" rel="stylesheet">
    <link href="https://static-assets-us.libcal.com/css_681/print.min.css" rel="stylesheet" media="print">
    
<script src="https://static-assets-us.libcal.com/jquery_16/jquery.min.js"></script>


<script src="https://static-assets-us.libcal.com/bootstrap_13/bootstrap3.min.js"></script>
    <script src="https://static-assets-us.libcal.com/js_681/LibCal_public.min.js"></script>
        <script>
    springSpace.dateFormat = "dddd, MMMM D, YYYY";
    springSpace.dateShortFormat = "ddd MMM Do YYYY";
    springSpace.timeFormat = "h:mma";
    springSpace.timezone = 'Asia/Dubai';
    springSpace.currency = "USD";
    springSpace.currencySymbol = "$";

    springSpace.language = 'en'; // en
    springSpace.locale = 'en-US'; // en-US

    springSpace.phpTimeFormat = 'g:ia';

    springSpace.bootstrapAsset = 'https://static-assets-us.libcal.com/bootstrap_13/bootstrap3_16.min.css';
    springSpace.publicCssAsset = 'https://static-assets-us.libcal.com/css_681/LibCal_public.min.css';
    springSpace.adminCssAsset = 'https://static-assets-us.libcal.com/css_681/LibCal_admin.min.css';
</script>
        <title>
                                      Group Study Room - Learning Resource Centre
             -
                Learning Resource Centre -
        Canadian University Dubai
    </title>
    <style>
            #s-lc-public-banner {
            padding: 0;
            margin: 0;
        }

        .s-lc-public-footer {
            margin: 0;
        }
    </style>
        <link rel="stylesheet" href="https://static-assets-us.libcal.com/fullcalendar_14/fullcalendar.min.css"/>

    <style>
    .s-lc-eq-avail, .label-eq-avail, .s-lc-eq-period-available {
        background: #14951f none !important;
border-color: #14951f !important;
    }

    .s-lc-eq-avail:hover, .s-lc-eq-period-available:hover {
        background: #095212 none !important;
border-color: #095212 !important;
    }

    .s-lc-eq-pending, .label-eq-pending, .s-lc-eq-period-pending {
        background: #F59F16 none !important;
border-color: #F59F16 !important;
    }

    .s-lc-eq-checkout, .s-lc-eq-r-unavailable, .s-lc-eq-r-padding, .label-eq-unavailable, .s-lc-eq-period-booked {
        background: #c91908 none !important;
border-color: #c91908 !important;
    }
</style>

    <style>
        @media (max-width: 768px) {
            .fc-timeline .fc-cell-text {
                font-size: 12px !important;
            }
        }
    </style>
    
<link rel="stylesheet" media="all" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
<style type="text/css">

#s-lc-group-description {
font-size:11px !important;
color:#333 !important;
margin-top:0 !important;
padding-top:0 !important;
}

#equip_ .fc-toolbar.fc-header-toolbar h2 {
    font-size: 11px;
    font-weight: bold;
    margin-bottom: 15px;
    color: #d5202a;
}

#s-lc-public-main form {
    padding: 1em;
    background: #efefef;
    border-radius: 10px;
}

#s-lc-public-main .h3, h3 {
    font-size: 16px;
}

#s-lc-public-main .s-lc-app-s1h3 {
  color:#d5202a;
font-weight:bold;
}

@media (max-width: 768px)
{
 #s-lc-eq-navform {
    padding-bottom: 1.5rem;
 }

.form-group {
    display: inline;
}

/* .form-group-sm select.form-control {
width:33.33% !important;
display:inline !important;
} */

.fc-unthemed .fc-content, .fc-unthemed .fc-divider, .fc-unthemed .fc-list-heading td, .fc-unthemed .fc-list-view, .fc-unthemed .fc-popover, .fc-unthemed .fc-row, .fc-unthemed tbody, .fc-unthemed td, .fc-unthemed th, .fc-unthemed thead {
    border-color: #ddd;
    font-size: 12px;
}

#s-lc-public-banner, #s-lc-public-bc {
display:none !important;
}

#s-lc-public-main, #col1 {
padding:0 !important;
}

}
</style>
</head>
<body id="equip_" class="s-lc-public s-lc-public-page-5">

        <a class="s-lc-skiplink alert-info" href="/r/accessible?lid=7109&gid=12579">
        Alternate page for screen reader Users    </a>

<a id="s-lc-public-skiplink" class="s-lc-skiplink alert-info" href="#s-lc-public-title-area">Skip to Main Content</a>


<div class="container">
            <div id="s-lc-public-banner" class="row s-lc-public-banner" role="banner">
            <a href="http://www.cud.ac.ae/">
                <img alt="Canadian University Dubai Learning Resource Centre" class="img-responsive" id="s-lc-public-banner-img" src="//d68g328n4ug0e.cloudfront.net/data/headers/4851/cud-lrc-banner.jpg" />
                <span class="sr-only">Canadian University Dubai Learning Resource Centre</span>
            </a>
        </div>
    
    <div id="s-lc-public-bc" class="row">
        <div class="col-md-12">
            <nav aria-label="Breadcrumb">
                <ol class="breadcrumb">
                    <li><a href="http://www.cud.ac.ae/">Canadian University Dubai</a></li>

                    <li class="s-lc-desktop-only"><a href="https://cud.libcal.com">Learning Resource Centre</a></li>

                    
                                            <li class="active s-lc-desktop-only">                  Group Study Room - Learning Resource Centre
            </li>
                    
                                        </ol>
            </nav>
        </div>
    </div>

    <noscript>
        <div class="alert alert-danger" id="noscript">Your browser has javascript disabled. Without javascript some functions will not work.</div>
    </noscript>

    <div id="s-lc-public-title-area">
                    
                        </div>

    <main>
            <div id="s-lc-public-main" class="s-lc-public-main">
        <div id="s-lc-public-page-content" class="row">
            
            <div id="col1" class="col-md-12 center" >
                                    <div id="s-lc-eq-navform" class="s-lc-spaces-setup-info">
                        <h1 class="sr-only">                  Group Study Room - Learning Resource Centre
            </h1>

                        
                        <form class="form-inline" role="search" autocomplete="off">
                            <input type="hidden" name="page" id="page" value="1">
                            <input type="hidden" name="type" id="type" value="2">

                                                            <div class="form-group form-group-sm">
                                    <label class="hidden-sm" for="lid">Location</label>
                                    <select class="form-control" name="lid" id="lid">
                                        
                                                                                    <option value="7109" selected="selected">Learning Resource Centre</option>

                                                                                    
                                                                                    <option value="0">
                                                View All Locations
                                            </option>
                                                                            </select>
                                </div>
                                                                <div class="form-group form-group-sm">
                                    <label class="hidden-sm" for="gid">Category</label>
                                    <select class="form-control" name="gid" id="gid">
                                                                                    <option value="12579" selected="selected">Group Study Rooms</option>
                                        
                                                                                    <option value="0" >Show All</option>
                                                                            </select>
                                </div>
                                                            
                            <div class="form-group form-group-sm">
                                <label class="hidden-sm" for="capacity">
                                    Capacity
                                </label>

                                <select class="form-control" name="capacity" id="capacity">
                                    
                                                                            <option value="0">
                                            All Spaces (not seats)
                                        </option>
                                    
                                    
                                                                            <option value="3">
                                            Space For 1 - 6 people
                                        </option>
                                                                    </select>
                            </div>

                                                     </form>
                    </div>
                
                
                                    <div id="s-lc-group-description" role="region" aria-label="description" class="s-lc-resource-description s-lc-spaces-setup-info">
                        <p>CUD Learning Resource Centre provides 4 group study rooms,<strong>&nbsp;</strong>intended as a place for students to work and study together as a group. CUD students with valid email addresses may reserve rooms online or through a QR code located in the circulation area.</p>

<p><strong>Booking Instruction</strong></p>

<ul>
	<li>Use the calendar below.&nbsp;Select the day you wish to reserve using the left tab,&nbsp;and in the grid below select the room, time and duration of your reservation. Available slots are marked in green. A maximum of 2 hours can be booked per pay.</li>
</ul>

<p>For booking assistance, please contact the library staff at the circulation counter or reach&nbsp;us at 04 709 6260 or&nbsp;&nbsp;<a href="mailto:library@cud.ac.ae" style="white-space:nowrap"><strong style="color:#d5202a"><i class="fa fa-envelope"><!-- empty --></i>library@cud.ac.ae</strong></a>.</p>

                    </div>
                
                <div id="s-lc-window-limit-warning" class="alert alert-info margin-top-med margin-bottom-none" role="alert" style="display: none;">
    You have reached the end of the bookable window. No availability will be shown past this point.
</div>

                <div id="time_grid_cont" role="grid" class="s-lc-spaces-time-grid s-lc-spaces-setup-info">
                        <div id="eq-time-grid">
    </div>

    <div id="s-lc-time-grid-pagination" class="s-lc-time-grid-pagination">
    </div>

    <div class="s-lc-time-grid-legend" id="eq-time-grid-legend">
        <span class="label-eq-cont" data-toggle="tooltip" data-placement="top" title="Slot is available, click to book!"><span class="label label-eq-avail">&nbsp;&nbsp;</span> Available</span>
<span class="label-eq-cont" data-toggle="tooltip" data-placement="top" title="Your pending booking."><span class="label label-eq-pending">&nbsp;&nbsp;</span> Your Booking</span>
<span class="label-eq-cont" data-toggle="tooltip" data-placement="top" title="This slot is unavailable for starting a new booking. Bookings may occasionally extend into this slot."><span class="label label-eq-unavailable">&nbsp;&nbsp;</span> Unavailable</span>    </div>
                </div>

                <div id="s-lc-eq-form-box" class="s-lc-spaces-setup-info" style="display: none;" role="region" aria-label="booking form" aria-live="polite">
                    <form id="s-lc-eq-form-times" class="form-horizontal" method="post">
                        <fieldset>
                            <div id="s-lc-eq-bwell" class="well" tabindex="0">&nbsp;</div>
                            <div id="s-lc-eq-bform-inner" class="col-sm-offset-5">
                                <button class="btn btn-primary" name="submit_times" id="submit_times">Confirm Times</button>&nbsp;
                                                            </div>
                        </fieldset>
                    </form>
                </div>

                <div id="s-lc-eq-form" style="clear:both; display: none;" role="region" aria-live="polite" aria-label="Booking details"></div>

                <div id="s-lc-eq-errors" class="alert alert-danger" style="display: none;" role="region" aria-live="polite" aria-label="Error encountered"></div>

                <div id="s-lc-eq-success" style="display: none;" role="region" aria-live="polite" aria-labelledby="s-lc-eq-success-title">
                </div>
            </div>
        </div>
    </div>
    </main>

    <footer id="s-lc-public-footer" class="row s-lc-public-footer">
        <div id="s-lc-public-footer-brand">
            <span title="libcal-us-1">Powered by</span> <a href="https://www.springshare.com">Springshare</a>.
        </div>
        <div id="s-lc-public-footer-rights">
            All rights reserved.
        </div>

                    <div id="s-lc-footer-support-link">
                <a href="mailto:Menchie@cud.ac.ae">Report a tech support issue.</a>
            </div>
        
                <div id="s-lc-public-footer-print-link">
        View this page in a format suitable for
        <a href="/r/accessible?lid=7109&gid=12579">
            screen-readers and keyboard-only users
        </a>
    </div>

        <div id="s-lc-public-footer-admin-links" role="navigation" aria-label="Admin Footer">
                            <a id="s-lc-sign-in" href="https://cud.libapps.com/libapps/login.php?site_id=17444&amp;target=">Login to LibApps</a>
                    </div>

        <div class="s-lc-public-footer-actions">
    
<div id="s-lc-language">
    <select id="s-lc-language-selector" aria-label="Select Language">
                <option value="ca" >català</option>
                <option value="cy" >Cymraeg</option>
                <option value="en" selected>English</option>
                <option value="es" >español</option>
                <option value="fr" >français</option>
                <option value="ga" >Irish</option>
                <option value="ja" >日本語 Nihongo</option>
                <option value="nl" >Nederlands</option>
                <option value="sl" >slovenski jezik</option>
                <option value="vi" >Tiếng Việt</option>
                <option value="zh" >中文 Zhōngwén</option>
            </select>
</div>
</div>
    </footer>

    
</div>


                <script defer src="https://static-assets-us.libcal.com/fullcalendar_14/fullcalendar.min.js"></script>
        <script defer src="https://static-assets-us.libcal.com/js_681/datepicker.min.js"></script>
    <link rel="stylesheet" href="https://static-assets-us.libcal.com/css_681/datepicker.min.css"/>

    <script>
    var springyFullCalendar = {
        commonOptions: {
            schedulerLicenseKey: '0391239527-fcs-1659132663',
            now: '2025\u002D01\u002D21\u002014\u003A17',
            nowIndicator: true,
            scrollTime: '13\u003A00\u003A00',
            lazyFetching: false,
            locale: springSpace.language,
            themeSystem: 'bootstrap',
            eventTextColor: '#222',
            eventDisplay: 'block',
            moreLinkClick: 'day',
            bootstrapFontAwesome: {
                goToDate: 'fa-calendar',
                goToNextAvailable: 'fa-fast-forward',
                refresh: 'fa-refresh',
            },
            navLinks: true, // https://fullcalendar.io/docs/navLinks
            resourceOrder: false, // https://fullcalendar.io/docs/resourceOrder
            stickyHeaderDates: false, // https://fullcalendar.io/docs/stickyHeaderDates && https://github.com/springshare/LibCal/issues/11801
            dayCellContent: function (info) {
                // regardless of language, show the day as a number with no extra characters
                return info.date.getDate();
            },
        },
        timelineOptions: {
            height: 'auto',
            refetchResourcesOnNavigate: false,
            eventOverlap: false,
            displayEventTime: false,
            slotDuration: '00\u003A30',
            titleFormat: springSpace.dateFormat,
            views: {
                timelineSingleDay: {
                    type: 'resourceTimeline',
                    buttonText: 'Day\u0020View',
                    duration: {days: 1},
                    slotLabelFormat: springSpace.timeFormat,
                },
                timelineHourlyShort: {
                    type: 'resourceTimeline',
                    duration: {days: 3},
                    slotLabelFormat: [springSpace.dateFormat, springSpace.timeFormat],
                },
                timelineHourlyLong: {
                    type: 'resourceTimeline',
                    duration: {days: 7},
                    slotLabelFormat: [springSpace.dateFormat, springSpace.timeFormat],
                },
                timelineDailyLong: {
                    type: 'resourceTimeline',
                    slotDuration: '24:00',
                    duration: {days: 28},
                    slotLabelFormat: ['dd D'],
                    nowIndicator: false
                },
                resourceTimeGridWeek: {
                    buttonText: 'Week\u0020View',
                    slotLabelFormat: springSpace.timeFormat,
                }
            },
        },
        publicTexts: {
            allDay: 'All\u0020Day',
            available: 'Available',
            dayGridMonth: 'Month',
            dayGridWeek: 'Agenda',
            goToDate: 'Go\u0020To\u0020Date',
            goToNextAvailable: 'Next\u0020Available',
            next: 'Next',
            prev: 'Previous',
            timeGridDay: 'Day',
            timeGridWeek: 'Week',
            today: 'Today',
            unavailable: 'Unavailable',
            yourBooking: 'Your\u0020Booking',
            listWeek: 'Week\u0020List',
        },
        adminTexts: {
            goToDate: 'Go\u0020To\u0020Date',
            refresh: 'Refresh',
            prev: 'Previous',
            next: 'Next',
            today: 'Today',
            week: 'Week',
            month: 'Month',
            day: 'Day',
            dayGridWeek: 'Agenda',
            allDay: 'All\u0020Day',
            atLocation: '\u0025title\u0025\u0020at\u0020\u0025location\u0025',
        },
        dateTimeFormats: {
            monthViewTitle: 'MMMM YYYY',
        },
    };

    // placeholder for dynamic content boxes with a full calendar
    var calendarList = {};

    function reRenderCalendarList() {
        for (var calId in calendarList) {
            calendarList[calId].render();
        }
    }
</script>
<script defer src="https://static-assets-us.libcal.com/js_681/direct/full-calendar-common.min.js"></script>
        <script>
        var springLang = {
            eq_js_until_det: 'until...',
            eq_js_rem_pending: 'Remove\u0020Pending\u0020Booking',
            eq_js_cart_tt: 'Create\u0020a\u0020shopping\u0020cart\u0020with\u0020these\u0020space\u0020bookings,\u0020and\u0020go\u0020to\u0020equipment\u0020booking\u0020page\u0020to\u0020add\u0020more\u0020items\u0020to\u0020the\u0020cart.',
            eq_js_isRequired: 'is\u0020required\u0021',
        };
    </script>

    <script defer src="https://static-assets-us.libcal.com/js_681/direct/public/equipment/common.min.js"></script>
    <script defer src="https://static-assets-us.libcal.com/js_681/direct/public/equipment/spaces.min.js"></script>
    <script defer src="https://static-assets-us.libcal.com/js_681/direct/public/equipment/session.min.js"></script>
    <script>
        var pendingRoomBookings = [];
        var pendingBookingNextId = 1;
        var pendingBookingsBlowAwayCart = false;

        function addError(msg, id) {
            jQuery(".s-lc-eq-" + id).addClass("has-error").find(".form-control").attr("aria-invalid", true);
            jQuery(".s-lc-eq-" + id).find(".s-lc-eq-flab").append('<div class="error-message">' + msg + "</div>");
            jQuery("#" + id).focus();
            return false;
        }

        function removeErrors() {
            jQuery(".s-lc-eq-q").removeClass("has-error").find(".error-message").remove();
        }

        function agreeToTermsAndConditions() {
            jQuery("#bform-terms-container").hide();
            jQuery("#bform-form-container").show();

            scrollAndFocusOnElement('#s-lc-bform-help');

            return false;
        }

        function toggleSubmitButton() {
            var isTermsAgreedTo = jQuery(this).is(':checked');
            jQuery('#btn-form-submit').prop('disabled', !isTermsAgreedTo);
        }

        function customFormValidation() {
            // exists to be overwritten by the specific group validation function
        }

        function preFormValidationAndPayload() {
            removeErrors();
            jQuery("#s-lc-eq-errors").hide();

            if (!isVisibleFieldsValid()) {
                return false;
            }

            if (!customFormValidation()) {
                return false;
            }

            pageBusyBegin("#btn-form-submit");

            var formElement = '#s-lc-eq-bform';
            var bookings = preparePendingBookingsPayload();
            var bookingsPayload = JSON.stringify(bookings);

            springyCommon.appendHiddenInput('bookings', bookingsPayload, formElement);
            springyCommon.appendHiddenInput('returnUrl', springySpaces.getReturnUrl(), formElement);
            springyCommon.appendHiddenInput('pickupHolds', jQuery('#s-lc-pickup-holds').val(), formElement);
            springyCommon.appendHiddenInput('method', springyPage.bookingMethod, formElement);

            return true;
        }

        function bookingSuccessCallback(data) {
            pageBusyEnd("#btn-form-submit");
            if (data.error) {
                jQuery("#s-lc-eq-errors").html(data.error).show();
                return;
            }

            jQuery('#s-lc-eq-form, .s-lc-spaces-setup-info').hide();
            jQuery('#s-lc-eq-success').html(data.html).show().focus();

            springySession.clear();

            return;
        }

        function bookingErrorCallback(xhr) {
            pageBusyEnd("#btn-form-submit");

            var errorMessage = ajaxErrorGetText(xhr);
            jQuery('#s-lc-eq-errors').html(errorMessage).show().focus();
        }

        function submitPendingTimes() {
            var payload = {
                patron: springySpaces.patron,
                patronHash: springySpaces.patronHash,
                returnUrl: springySpaces.getReturnUrl(),
                bookings: preparePendingBookingsPayload(),
                method: springyPage.bookingMethod,
            };

            pageBusyBegin("#submit_times");

            jQuery.ajax({
                type: 'post',
                url: '/ajax/space/times',
                data: payload,
                dataType: 'json',
            })
            .always(function () {
                pageBusyEnd("#submit_times");
            })
            .done(function(data) {
                if (data.redirect) {
                    // redirect to libauth checkout page
                    window.location = data.redirect;
                    return;
                }

                // hide a bunch of stuff
                jQuery('.s-lc-spaces-setup-info').hide();

                // setup booking form + terms html
                jQuery("#s-lc-eq-form").html(data.html).show();

                // scroll to the top of the page
                window.scrollTo(0, 0);
            })
            .fail(ajaxErrorHandler);

            return false;
        }

        function makeCartAndGoToEquipPage() {
            // we only allow user to do this if all the room bookings start at the same time
            if (pendingRoomBookings.length > 1) {
                var startTime = pendingRoomBookings[0].start;
                for (var i = 1; i < pendingRoomBookings.length; i++) {
                    var bookingInfo = pendingRoomBookings[i];
                    if (!bookingInfo.start.isSame(startTime)) {
                        errorAlert('You can only create an Equipment Cart if all your room bookings begin at the same time.');
                        return false;
                    }
                }
            }

            var payload = {
                blowAwayCart: pendingBookingsBlowAwayCart,
                returnUrl: springySpaces.getReturnUrl(),
                bookings: preparePendingBookingsPayload(),
                method: springyPage.bookingMethod,
            };

            workingAlert();

            jQuery.ajax({
                type: 'post',
                url: "/ajax/space/createcart",
                data: payload,
                dataType: 'json',
            })
            .always(function (data) {
                stopAlert();
            })
            .done(function(data) {
                if (data.success) {
                    // redirect to new page
                    window.location = data.redirect;
                } else if (data.hasItems) {
                    errorAlert("Cart already has items in it. If you click the shopping cart again, the existing items in the cart will be replaced by the selected rooms.");
                    pendingBookingsBlowAwayCart = true;
                } else {
                    errorAlert(data.error);
                }
            })
            .fail(ajaxErrorHandler);

            return false;
        }

        function changeBookingTimes() {
            // show the old form box + availability grid
            jQuery('.s-lc-spaces-setup-info').show();

            // hide the terms + booking form
            jQuery('#s-lc-eq-form, #s-lc-eq-errors').hide();

            return false;
        }

        function getSpaceResourceContent(info) {
            var html = '';
            var resourceData = info.resource.extendedProps;
            var resourceId = springyPage.isSeatBooking ? resourceData.seatId : resourceData.eid;
            var title  = escapeHtml(info.fieldValue);

            if (resourceData.hasInfo) {
                html += '<a href="#" class="s-lc-item-more-info" data-eid="' + resourceId + '"' +
                    ' aria-label="Click\u0020for\u0020more\u0020info\u0020about ' + title + '">' +
                    '<span class="s-lc-info-label">Info</span>' +
                    '</a>';
            }

            var additionalClasses = '';
            var additionalIcons = '';
            var filterIds = resourceData.filterIds || [];

            for (var i = 0; i < filterIds.length; i++) {
                var filterId = filterIds[i];
                if (filterId in springyPage.searchFilters) {
                    var filter = springyPage.searchFilters[filterId];

                    additionalClasses += ' s-lc-filter-' + filterId;
                    additionalIcons += ' <i class="fa ' + filter.icon + ' fa-lg" aria-hidden="true"></i>';
                }
            }

            var resourceLabel = '<span class="fc-cell-text' + additionalClasses + '">' + title + additionalIcons + '</span>';

            if (resourceData.url !== undefined) {
                html += '<a href="' + resourceData.url + '">' + resourceLabel + '</a>';
            } else {
                html += resourceLabel;
            }

            return {
                html: html,
            };
        }

        jQuery(function () {
            springyPublic.registerClearBackForwardCache();

            jQuery('#lid').on('change', goToPageForLocation);
            jQuery('#gid').on('change', goToPageForGroup);

            jQuery('#eq_cart').on('click', makeCartAndGoToEquipPage);

            jQuery('#s-lc-eq-form-times').on('submit', submitPendingTimes);
        });
    </script>


    <script src="https://static-assets-us.libcal.com/js_681/direct/pagination.min.js"></script>
    <script src="https://static-assets-us.libcal.com/js_681/direct/public/equipment/spaces-standard.min.js"></script>
        <script>
        var springyPage = {
            wantAlternatingBackground: false,
            timelineOptions: {
                resourceAreaWidth: '15%',
                            },
            locationId: 7109,
            groupId: 12579,
            itemId: -1,
            isSeatBooking: 0,
            seatId: 0,
            zoneId: 0,
            searchFilters: [],
            filterIds: [],
            isDailyBookings: 0,
            resourceRows: 5,
            resourceColumnLabel: 'Space',
            viewMode: 'timelineSingleDay',
            returnUrl: '',
            capacitySeatValue: -1,
            pageIndex: 0,
            pageSize: 18,
            bookingMethod: 11,
        };

        var resources = [];
        var resourceNameIdMap = [];

                                                        resources.push({
    id: "eid_185445",
    title: "Collaborative\u0020Research\u0020Space",
    url: "/space/185445",
    eid: 185445,
    gid: 12579,
    lid: 7109,
    grouping: "Group\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 5,
    hasInfo: false,
    thumbnail: "",
    filterIds: [],
});

resourceNameIdMap["eid_185445"] = "Collaborative\u0020Research\u0020Space";
                                    resources.push({
    id: "eid_48417",
    title: "Study\u0020Room\u00201",
    url: "/space/48417",
    eid: 48417,
    gid: 12579,
    lid: 7109,
    grouping: "Group\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 5,
    hasInfo: false,
    thumbnail: "",
    filterIds: [],
});

resourceNameIdMap["eid_48417"] = "Study\u0020Room\u00201";
                                    resources.push({
    id: "eid_60895",
    title: "Study\u0020Room\u00202",
    url: "/space/60895",
    eid: 60895,
    gid: 12579,
    lid: 7109,
    grouping: "Group\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 5,
    hasInfo: false,
    thumbnail: "",
    filterIds: [],
});

resourceNameIdMap["eid_60895"] = "Study\u0020Room\u00202";
                                    resources.push({
    id: "eid_48416",
    title: "Study\u0020Room\u00203",
    url: "/space/48416",
    eid: 48416,
    gid: 12579,
    lid: 7109,
    grouping: "Group\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 5,
    hasInfo: false,
    thumbnail: "",
    filterIds: [],
});

resourceNameIdMap["eid_48416"] = "Study\u0020Room\u00203";
                                    resources.push({
    id: "eid_126907",
    title: "Study\u0020Room\u00204",
    url: "/space/126907",
    eid: 126907,
    gid: 12579,
    lid: 7109,
    grouping: "Group\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 5,
    hasInfo: false,
    thumbnail: "",
    filterIds: [],
});

resourceNameIdMap["eid_126907"] = "Study\u0020Room\u00204";
                                    
        
        var paginatedResources = springyPagination.createPaginatedResources(resources, springyPage.pageSize);

        var capacityRangesMap = {};
                                capacityRangesMap[0] = {
                min: 0,
                max: 9223372036854775807
            };
                                capacityRangesMap[1] = {
                min: 0,
                max: 3
            };
                                capacityRangesMap[2] = {
                min: 4,
                max: 4
            };
                                capacityRangesMap[3] = {
                min: 5,
                max: 6
            };
                                capacityRangesMap[4] = {
                min: 7,
                max: 9223372036854775807
            };
        
        var resourceSettings = createResourceSettings(1);

        springyPage.resourceCount = resources.length;
    </script>
    
    <script>
    var pendingBookingsLimitIssues = null;
    var dateFormatStartTimeDict = "MMDDHHmm";
    var dateFormatDayOfYear = "YYYY-MM-DD";
    var issueTypeAdditionalText = {
        "duration": " minutes",
        "frequency": " bookings",
    };
    var frequencyDisplayStrings = {
        "d": " per\u0020day",
        "w": " per\u0020week",
        "m": " per\u0020month",
        "y": " per\u0020year",
        "t": " at\u0020a\u0020time",
    };

    function pendingRoomBookingsAreNowEmpty() {
        jQuery("#s-lc-eq-form-box").hide();
    }

    function renderPendingRoomBookings() {
        // ensure all tooltips are hidden
        jQuery(".tooltip").hide();

        if (pendingRoomBookings.length == 0) {
            pendingRoomBookingsAreNowEmpty();
            return;
        }

        // refresh the shown cart items
        // format the room data as html
        var html = '<div>';

        var startDateTimeFormat = springyPage.isDailyBookings ? springSpace.dateFormat : springSpace.getDateTimeFormat();
        var endDateTimeFormat = springyPage.isDailyBookings ? springSpace.dateFormat : springSpace.getShortDateTimeFormat();
        var totalCost = 0;

        for (var i = 0; i < pendingRoomBookings.length; i++) {
            var bookingInfo = pendingRoomBookings[i];
            var bookingCost = bookingInfo.cost;
            var resourceId = bookingInfo.seat_id > 0 ? bookingInfo.seat_id : bookingInfo.eid;
            var resourceName = resourceNameIdMap['eid_' + resourceId];

            html += '<div class="form-group s-lc-pending-booking" id="pending_booking_' + bookingInfo.id + '">';
            html += '   <label class="col-md-5 control-label" for="bookingend_' + bookingInfo.id + '"><strong>' + resourceName + '</strong>: ' + bookingInfo.start.format(startDateTimeFormat) + ' ' + springLang.eq_js_until_det + '</label>';
            html += '   <div class="col-md-3">';
            html += '     <div class="input-group">';
            html += '           <select id="bookingend_' + bookingInfo.id + '" name="bookingend_' + bookingInfo.id + '" data-booking="' + bookingInfo.id + '" class="form-control input-sm b-end-date">';

            for (var selectionIndex = 0; selectionIndex < bookingInfo.options.length; selectionIndex++) {
                var selected = bookingInfo.optionSelected == selectionIndex ? 'selected="selected"' : '';
                var value = bookingInfo.options[selectionIndex];
                var name = moment(value).format(endDateTimeFormat);
                var checksum = bookingInfo.optionChecksums[selectionIndex];
                html += '<option value="' + value + '" ' + selected + ' data-crc="' + checksum + '">' + name + '</option>';
            }

            html += '           </select>';
            html += '           <div class="input-group-btn">';
            html += '               <button type="button" class="btn btn-default btn-sm" onclick="return removePendingBooking(' + bookingInfo.id + ',' + bookingInfo.lid + ');"><i class="fa fa-trash-o" aria-hidden="true"></i><span class="sr-only">' + springLang.eq_js_rem_pending + '</span></button>';
            html += '           </div>';
            html += '       </div>';
            html += '     </div>';
            if (bookingCost > 0) {
                var costDisplay = springSpace.formatCurrency(bookingCost);
                var costPreview = "\u007Bamount\u007D".replace("\u007Bamount\u007D", costDisplay).replace("\u007Brate\u007D", "");
                html += '<label class="col-md-3 control-label s-lc-billing-cost-single">' + costPreview + '</label>';
            }
            html += '   </div>';
            html += '   </div>';
            html += '</div>';

            totalCost += bookingCost;
        }

        var bookingDurationOkay = true;
        if (pendingBookingsLimitIssues) {
            bookingDurationOkay = false;
            pendingBookingsLimitIssues.forEach(function(issueDetails) {
                var limitDisplay = issueDetails.allowed + issueTypeAdditionalText[issueDetails.type] + frequencyDisplayStrings[issueDetails.frequency];
                var usedDisplay = issueDetails.used + issueTypeAdditionalText[issueDetails.type];
                var issueDisplay = 'Sorry,\u0020you\u0020can\u0020only\u0020reserve\u0020\u007BlimitAmount\u007D,\u0020and\u0020you\u0020currently\u0020have\u0020\u007BusedAmount\u007D.\u0020Please\u0020adjust\u0020your\u0020booking.'.replace('{limitAmount}', limitDisplay).replace('{usedAmount}', usedDisplay);
                var issueHtml = '<strong>' + issueDetails.group + '</strong>: ' + issueDisplay;

                html += '\
                    <div class="form-group">\
                        <div class="col-md-offset-1 col-md-10">\
                            <div class="alert alert-warning">' + issueHtml + '</div>\
                        </div>\
                    </div>';
            });
        }

        if (totalCost > 0) {
            html += '\
                <div class="form-group s-lc-pending-booking">\
                    <label class="col-md-5 control-label">Total\u0020cost\u0020for\u0020this\u0020reservation\u003A</label>\
                    <label class="col-md-5 control-label s-lc-billing-cost-total">' + springSpace.formatCurrency(totalCost) + '</label>\
                </div>';
        }

        html += '</div>';

        // show the booking form box which contains the booking well, the terms + conditions and the booking form
        jQuery("#s-lc-eq-form-box").show();

        // put the item in the displayed cart + set the window focus to the cart
        var roomCart = jQuery("#s-lc-eq-bwell");
        roomCart.empty();
        roomCart.html(html);
        roomCart.focus();

        // disable the add equipment and form submission buttons until the times are okay
        jQuery("#submit_times, #eq_cart").prop('disabled', !bookingDurationOkay);

        // setup delete icon tooltips
        accessibleIcons();

        // make the tooltip for the cart icon
        jQuery("#eq_cart").tooltip({
            title: springLang.eq_js_cart_tt,
            html: true,
            container: "body"
        });

        jQuery('.b-end-date').on('change', function() {
            var changedBooking = jQuery(this);

            updatePendingBookingDuration(changedBooking);
        });
    }

    function preparePendingBookingsPayload() {
        var payload = [];

        for (var i = 0; i < pendingRoomBookings.length; i++) {
            var bookingInfo = pendingRoomBookings[i];
            payload.push({
                id: bookingInfo.id,
                eid: bookingInfo.eid,
                seat_id: bookingInfo.seat_id,
                gid: bookingInfo.gid,
                lid: bookingInfo.lid,
                start: bookingInfo.start.format(springSpace.phpDateTimeFormat),
                end: bookingInfo.end.format(springSpace.phpDateTimeFormat),
                checksum: bookingInfo.checksum,
            });
        }
        return payload;
    }

    function updatePendingBookingsFromData(bookings) {
        pendingRoomBookings = [];

        for (var i = 0; i < bookings.length; i++) {
            var booking = bookings[i];

            pendingRoomBookings.push({
                id: booking.id,
                eid: booking.eid,
                seat_id: booking.seat_id,
                gid: booking.gid,
                lid: booking.lid,
                cost: booking.cost,
                checksum: booking.checksum,

                name: booking.name,
                start: moment(booking.start),
                end: moment(booking.end),

                options: booking.options,
                optionSelected: booking.optionSelected,
                optionChecksums: booking.optionChecksums,
            });
        }
    }

    function pendingRoomBookingsUpdateListAndAvailability(payload, fcInstance) {
        // if we are adding rooms, we might need to hide the previous booking success message
        jQuery("#s-lc-eq-success").hide();

        workingAlert();

        // find out booking information
        jQuery.ajax({
            type: "post",
            url: "/spaces/availability/booking/add",
            data: payload,
            dataType: "json",
        })
        .always(stopAlert)
        .done(function(data) {
            if (data.error) {
                if (data.isRefreshRequired) {
                    fcInstance.refetchEvents();
                }

                return errorAlert(data.error);
            }

            // success! the entire pending bookings array can be re-created now
            pendingBookingsLimitIssues = data.limitIssues;
            updatePendingBookingsFromData(data.bookings);

            // this request might have came back with updated grid data
            // if it did not - refresh the whole grid
            if (data.gridUpdateData) {
                updateGridEventsForItem(data.gridUpdateData, fcInstance);
            } else if (fcInstance) {
                fcInstance.refetchEvents();
            }

            renderPendingRoomBookings();
        })
        .fail(ajaxErrorHandler);

        return false;
    }

    function createStartTimeToClassMap(gridData) {
        var startTimeToClassMap = {};

        gridData.forEach(function(gridElement) {
            var startMoment = moment(gridElement.start);
            startTimeToClassMap[startMoment.format(dateFormatStartTimeDict)] = [gridElement.className];
        });

        return startTimeToClassMap;
    }

    function updateGridEventsForItem(gridUpdateData, fcInstance) {
        var changedItemId = gridUpdateData.itemId;
        var changedRangeStart = moment(gridUpdateData.dateStart, springSpace.phpDateTimeFormat);
        var changedRangeEnd = moment(gridUpdateData.dateEnd, springSpace.phpDateTimeFormat);
        var startTimeToClassMap = createStartTimeToClassMap(gridUpdateData.gridData);

        fcInstance.batchRendering(function() {
            fcInstance.getEvents().forEach(function (clientEvent) {
                if (clientEvent.extendedProps.itemId !== changedItemId) {
                    return;
                }

                var clientEventStart = moment(clientEvent.start);
                // if this event is before the day of events that was changed - forget it
                // and we only want to process events that start before the changed range "end"
                if (clientEventStart.isBefore(changedRangeStart) || !clientEventStart.isBefore(changedRangeEnd)) {
                    return;
                }

                var startKey = clientEventStart.format(dateFormatStartTimeDict);
                if (startKey in startTimeToClassMap) {
                    // this slot is unavailable
                    clientEvent.setProp('classNames', startTimeToClassMap[startKey]);
                    clientEvent.setExtendedProp('status', 1);
                } else {
                    // this slot is available
                    clientEvent.setProp('classNames', ["s-lc-eq-avail"]);
                    clientEvent.setExtendedProp('status', 0);
                }
            });
        });
    }

    function timeGridClickedOnAvailableRoom(calEvent, fcInstance) {
        var resource = calEvent.getResources()[0];
        var resourceData = resource.extendedProps;
        var timeslotData = calEvent.extendedProps;
        var view = fcInstance.view;

        var payload = {
            add: {
                eid: resourceData.eid,
                seat_id: resourceData.seatId,
                gid: resourceData.gid,
                lid: resourceData.lid,
                start: moment(calEvent.start).format(springSpace.phpDateTimeFormat),
                checksum: timeslotData.checksum,
            },
                        lid: 7109,
            gid: 12579,
                        start: moment(view.activeStart).format(dateFormatDayOfYear),
            end: moment(view.activeEnd).format(dateFormatDayOfYear),
            bookings: preparePendingBookingsPayload(),
        }

        return pendingRoomBookingsUpdateListAndAvailability(payload, fcInstance);
    }

    function updatePendingBookingDuration(changedBooking) {
        var fcInstance = getCurrentTimelineInstance(7109);
        var view = fcInstance.view;
        var selectedElement = changedBooking.find(':selected');

        var payload = {
            update: {
                id: changedBooking.data('booking'),
                checksum: selectedElement.data('crc'),
                end: changedBooking.val()
            },
                        lid: 7109,
            gid: 12579,
                        start: moment(view.activeStart).format(dateFormatDayOfYear),
            end: moment(view.activeEnd).format(dateFormatDayOfYear),
            bookings: preparePendingBookingsPayload(),
        }

        return pendingRoomBookingsUpdateListAndAvailability(payload, fcInstance);
    }

    function removePendingBooking(pendingId, locationId) {
        var timeline = getCurrentTimelineInstance(locationId);
        var view = timeline.view;

        var payload = {
            removeId: pendingId,
                        lid: 7109,
            gid: 12579,
                        start: moment(view.activeStart).format(dateFormatDayOfYear),
            end: moment(view.activeEnd).format(dateFormatDayOfYear),
            bookings: preparePendingBookingsPayload(),
        }

        return pendingRoomBookingsUpdateListAndAvailability(payload, timeline);
    }

    function formatEventsForFullCalendar(events) {
        events.forEach(function(eventData) {
            eventData.resourceId = "eid_" + eventData.itemId;

            if (eventData.className) {
                // this slot is unavailable
                eventData.status = 1;
                eventData.classNames = [eventData.className];
            } else {
                // this slot is available
                eventData.classNames = ["s-lc-eq-avail"];
                eventData.status = 0;
            }
        });

        return events;
    }

    function timeGridRoomFetchEventsForTimePeriod(start, end, callback, lid, gid, eid) {
        var data = {
            lid: lid,
            gid: gid,
            eid: eid,
            seat: springyPage.isSeatBooking,
            seatId: springyPage.seatId,
            zone: springyPage.zoneId,
            filters: springyPage.filterIds,
            start: moment(start).format(dateFormatDayOfYear),
            end: moment(end).format(dateFormatDayOfYear),
            bookings: preparePendingBookingsPayload(),
            pageIndex: springyPage.pageIndex,
            pageSize: springyPage.pageSize,
        };

        var url = '/spaces/availability/grid';

                        if (typeof springyPage.autoCreateBookingDate === 'string') {
            url = '/spaces/availability/grid/pre-create'
            data.autoCreateBookingDate = springyPage.autoCreateBookingDate;
            springyPage.autoCreateBookingDate = null;
        }

        springyCommon.closeAllPopups();

        jQuery.ajax({
            type: 'post',
            url: url,
            data: data,
            dataType: 'json',
        })
        .done(function(data) {
            callback(formatEventsForFullCalendar(data.slots));

            // sometimes on an initial view of the availability grid we auto-create a booking
            // (currently this is only possible via maps)
            if (data.isPreCreatedBooking) {
                updatePendingBookingsFromData(data.bookings);
                renderPendingRoomBookings();
            }

            var isAtEndOfWindowLimit = data.windowEnd === true;
            jQuery('#s-lc-window-limit-warning').toggle(isAtEndOfWindowLimit);
            jQuery('.fc-next-button').prop('disabled', isAtEndOfWindowLimit);

                        var selectorPrefix = '';
            var isNextAvailableButtonWanted = (document.querySelector(selectorPrefix + '.s-lc-eq-avail') === null);
            jQuery(selectorPrefix + '.fc-goToNextAvailable-button').toggle(isNextAvailableButtonWanted);
        })
        .fail(function(xhr) {
            // let fullcalendar know that the request has completed with no results
            callback([]);

            // and display the error to the user
            ajaxErrorHandler(xhr);
        });
    }
</script>


</body>
</html>
